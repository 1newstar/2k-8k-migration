execute sys.DBMS_REDEFINITION.START_REDEF_TABLE('HR', 'TEST', 'TEST8k',NULL, DBMS_REDEFINITION.CONS_USE_ROWID);                                                                                                                                                                                                                                                                                                                                                                                                                                                            
declare                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
num_errors pls_integer;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
begin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
sys.DBMS_REDEFINITION.copy_table_dependents('HR', 'TEST', 'TEST8k',dbms_redefinition.cons_orig_params,num_errors=>num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                             
dbms_output.put_line(num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
end;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
execute sys.DBMS_REDEFINITION.sync_interim_table('HR', 'TEST', 'TEST8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
execute sys.DBMS_REDEFINITION.finish_redef_table('HR', 'TEST', 'TEST8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
drop table HR.TEST8k;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
purge dba_recyclebin;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
alter index HR.OBJIDX rebuild tablespace USERS8k online;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
execute sys.DBMS_REDEFINITION.START_REDEF_TABLE('HR', 'USERS', 'USERS8k',NULL, DBMS_REDEFINITION.CONS_USE_ROWID);                                                                                                                                                                                                                                                                                                                                                                                                                                                          
declare                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
num_errors pls_integer;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
begin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
sys.DBMS_REDEFINITION.copy_table_dependents('HR', 'USERS', 'USERS8k',dbms_redefinition.cons_orig_params,num_errors=>num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                           
dbms_output.put_line(num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
end;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
execute sys.DBMS_REDEFINITION.sync_interim_table('HR', 'USERS', 'USERS8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
execute sys.DBMS_REDEFINITION.finish_redef_table('HR', 'USERS', 'USERS8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
drop table HR.USERS8k;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
purge dba_recyclebin;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
execute sys.DBMS_REDEFINITION.START_REDEF_TABLE('HR', 'SEGMENTS', 'SEGMENTS8k',NULL, DBMS_REDEFINITION.CONS_USE_ROWID);                                                                                                                                                                                                                                                                                                                                                                                                                                                    
declare                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
num_errors pls_integer;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
begin                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
sys.DBMS_REDEFINITION.copy_table_dependents('HR', 'SEGMENTS', 'SEGMENTS8k',dbms_redefinition.cons_orig_params,num_errors=>num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                     
dbms_output.put_line(num_errors);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
end;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
execute sys.DBMS_REDEFINITION.sync_interim_table('HR', 'SEGMENTS', 'SEGMENTS8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
execute sys.DBMS_REDEFINITION.finish_redef_table('HR', 'SEGMENTS', 'SEGMENTS8k');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
drop table HR.SEGMENTS8k;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
purge dba_recyclebin;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
alter index HR.SEGMENTIDX rebuild tablespace USERS8k online;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               

